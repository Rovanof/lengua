<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Libro PDF Pantalla Completa</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css"/>
<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden;
    background: #111;
  }
  .swiper {
    width: 100%;
    height: 100%;
  }
  .swiper-slide {
    display: flex;
    justify-content: center;
    align-items: center;
    background: #111;
  }
  canvas {
    max-width: 100%;
    max-height: 100%;
    border-radius: 4px;
    box-shadow: 0 0 20px rgba(0,0,0,0.7);
  }
</style>
</head>
<body>

<!-- Contenedor Swiper -->
<div class="swiper">
  <div class="swiper-wrapper" id="pdf-slides">
    <!-- Las páginas se agregarán dinámicamente aquí -->
  </div>
  <!-- Paginación opcional -->
  <div class="swiper-pagination"></div>
</div>

<!-- PDF.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.12.313/pdf.min.js"></script>
<!-- Swiper.js -->
<script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>

<script>
const url = '1.pdf'; // tu PDF
const pdfSlides = document.getElementById('pdf-slides');

let pdfDoc = null;

// Cargar PDF
pdfjsLib.getDocument(url).promise.then(pdf => {
  pdfDoc = pdf;

  for(let i = 1; i <= pdfDoc.numPages; i++){
    const slide = document.createElement('div');
    slide.classList.add('swiper-slide');
    const canvas = document.createElement('canvas');
    canvas.id = 'page-' + i;
    slide.appendChild(canvas);
    pdfSlides.appendChild(slide);

    renderPage(i, canvas);
  }

  // Inicializar Swiper después de cargar todas las páginas
  new Swiper('.swiper', {
    direction: 'horizontal',
    loop: false,
    pagination: { el: '.swiper-pagination', clickable: true },
    grabCursor: true,
  });
});

function renderPage(num, canvas) {
  pdfDoc.getPage(num).then(page => {
    const viewport = page.getViewport({ scale: 1 });
    const scale = Math.min(window.innerWidth / viewport.width, window.innerHeight / viewport.height);
    const scaledViewport = page.getViewport({ scale });

    canvas.width = scaledViewport.width;
    canvas.height = scaledViewport.height;

    const ctx = canvas.getContext('2d');
    page.render({ canvasContext: ctx, viewport: scaledViewport });
  });
}

// Ajustar al redimensionar la ventana
window.addEventListener('resize', () => {
  if(!pdfDoc) return;
  for(let i = 1; i <= pdfDoc.numPages; i++){
    const canvas = document.getElementById('page-' + i);
    renderPage(i, canvas);
  }
});
</script>

</body>
</html>
