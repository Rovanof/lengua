<!doctype html>

<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Base simple de Preguntas y Respuestas (local)</title>
  <style>
    :root{font-family: system-ui; --rock:#4fa3ff; --bg:#0b1a2a; --card:#10263f; --text:#d9ecff;}
    body{background:var(--bg);color:var(--text);max-width:900px;margin:24px auto;padding:16px}
    h1{text-align:center;color:var(--rock);letter-spacing:2px;margin-bottom:14px}
    .chat-container{background:var(--card);padding:16px;border-radius:16px;box-shadow:0 0 20px #000a}
    .chat-window{height:400px;overflow-y:auto;padding:10px;background:#08121f;border-radius:12px;margin-bottom:10px}
    .msg{max-width:75%;padding:10px;border-radius:12px;margin:6px 0;font-size:.95rem;line-height:1.3}
    .msg.user{background:#1b3350;margin-left:auto;color:#fff}
    .msg.ai{background:#123456;color:#eaf4ff;border-left:3px solid var(--rock)}
    .input-area{margin-top:10px}
    .input-area input{width:100%;padding:12px;border-radius:12px;background:#0a1828;border:1px solid #1e3a5c;color:var(--text);font-size:1rem}
    .input-area input:focus{outline:2px solid var(--rock)}
    .muted{color:#aac7e6;font-size:.85rem;margin-bottom:12px;text-align:center}
    .input-area button{padding:12px 16px;border-radius:12px;background:var(--rock);border:0;color:#fff;font-weight:600;font-size:1rem;box-shadow:0 0 10px #0008;cursor:pointer;}
  .input-area button:active{transform:scale(.97)}
</style>
</head>
<body>
  <div class="chat-container">
    <h1>Mini IA Local</h1>
    <p class="muted">Escribe una pregunta abajo. El sistema busca la mejor coincidencia en tu base local (que puedes editar en el código del HTML). <br>Las respuestas también pueden escucharse con voz.</p><div id="chatWindow" class="chat-window"></div>

<div class="input-area" style="display:flex; gap:8px; align-items:center;">
  <input id="userInput" type="text" placeholder="Escribe tu pregunta..." style="flex:1;" />
  <button id="sendBtn">Enviar</button>
</div>

  </div>  <script>
    // ------------------ BASE DE DATOS LOCAL ------------------
    const QA_DB = [
      { q: "¿Cuál es la capital de Argentina?", a: "Buenos Aires es la capital de Argentina." },
      { q: "¿Qué es localStorage?", a: "Es un sistema de almacenamiento local del navegador que guarda datos en forma de texto." }
    ];

    // ------------------ CHAT ------------------
    const chatWindow = document.getElementById('chatWindow');

    function addMessage(text, sender="ai"){
      const div = document.createElement('div');
      div.className = sender === "user" ? "msg user" : "msg ai";
      div.innerHTML = `<p>${text}</p>`;
      chatWindow.appendChild(div);
      chatWindow.scrollTop = chatWindow.scrollHeight;
    }

    function findBestMatch(question){
      const qLower = question.toLowerCase();
      let best = null;
      let bestScore = 0;

      QA_DB.forEach(entry =>{
        let score = 0;
        const qWords = entry.q.toLowerCase().split(" ");
        qWords.forEach(word =>{
          if(qLower.includes(word)) score++;
        });
        if(score > bestScore){ bestScore = score; best = entry; }
      });

      return best ? best.a : "No se encuentra una respuesta para su solicitud";
    }

    // (Voz eliminada) 
      u.lang = "es-AR";
      const voices = speechSynthesis.getVoices();
      const male = voices.find(v => v.name.toLowerCase().includes("male") || v.name.toLowerCase().includes("hombre") || v.name.toLowerCase().includes("google") );
      if(male) u.voice = male;
      speechSynthesis.speak(u);
    }

    // ------------------ ENVIAR ------------------
    document.getElementById('sendBtn').onclick = send;
    document.getElementById('userInput').addEventListener('keypress', e =>{
      if(e.key === 'Enter') send();
    });

    function send(){
      const input = document.getElementById('userInput');
      const text = input.value.trim();
      if(!text) return;

      addMessage(text, "user");
      input.value = "";

      const response = findBestMatch(text);
      addMessage(response, "ai");
      
    }
  </script></body>
</html>
